# Task 1

## Архитектура

Необходимо сразу закладываться на многослойную архитектуру и ограждать каждый из слоев интерфейсами, так как в будущем будет добавляться много новой функциональности в виде отдельных слоев. На начальном этапе архитектура будет состоять из следующего:

- **compute** \[слой, отвечающий за обработку запроса\] 

- - **parser** - \[компонент внутри слоя, отвечающий за парсинг запросов\]

- **storage** \[слой, отвечающий за хранение и обработку данных\] 

- - **engine** - \[компонент внутри слоя, отвечающий за то, где и как хранятся данные\]

Процесс обработки запроса должен представлять собой пайплайн, то есть сначала запрос приходит в compute слой, там он обрабатывается и затем идет в storage для дальнейшей обработке.

## Синтаксис запросов

Грамматика языка запросов в виде eBNF:

```text
query = set_command | get_command | del_command

set_command = "SET" argument argument
get_command = "GET" argument
del_command = "DEL" argument
argument    = punctuation | letter | digit { punctuation | letter | digit }

punctuation = "*" | "/" | "_" | ...
letter      = "a" | ... | "z" | "A" | ... | "Z"
digit       = "0" | ... | "9"
 
```

Пример запросов:

```eBNF
SET weather_2_pm cold_moscow_weather
GET /etc/nginx/config
DEL user_\*\*\*\*
```

## Особенности реализации

- **Взаимодействие с базой данных на данном этапе должно осуществляться только лишь через командную строку**, то есть вы запускаете базу данных и взаимодействуете с ней через командую строку с использованием языка запросов. Никакие данные на жесткий диск сейчас дампить не нужно (*если вы сделали рестарт базы данных, то все данные должны будут пропасть*)
- **В качестве engine пишем in-memory движок**, который просто будет хранить данные в виде хэш-таблицы (*в качестве ключей и запросов только текстовые типы данных*)
- **Необходимо сразу задуматься над логированием**, поэтому следует логировать ключевые моменты обработки запросов (*в качестве библиотеки логирования можно выбрать zap*)
- **Покрываем код тестами**, особенно это касается компонентов parser внутри compute слоя и компонента engine внутри storage слоя
